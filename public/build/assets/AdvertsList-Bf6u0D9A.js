var I=Object.defineProperty;var D=(e,t,a)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var m=(e,t,a)=>D(e,typeof t!="symbol"?t+"":t,a);import{_ as w,r as c,o as y,c as k,a as r,m as N,n as E,d as U,b as j,e as h,w as i,f as q,g as z,h as L,i as v,t as b,v as M,p as O,j as V}from"./app-B0wpD2Za.js";import{B as F,u as Q}from"./useAdvert-Dn0vfqZA.js";function G(e,t,a,u){return e/=u/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)}function H(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function J(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function P(e,t,a){const u=J(),n=e-u,l=20;let d=0;t=typeof t>"u"?500:t,function s(){d+=l,H(G(d,u,n,t)),d<t&&requestAnimationFrame(s)}()}const K={name:"PaginationDefault",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:50},pageSizes:{type:Array,default(){return[5,10,20]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},emits:["update:page","update:limit","pagination"],computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange(e){this.currentPage=1,this.$emit("pagination",{page:this.currentPage,perPage:e}),this.autoScroll&&P(0,800)},handleCurrentChange(e){this.$emit("pagination",{page:e,perPage:this.pageSize}),this.autoScroll&&P(0,800)}}};function R(e,t,a,u,n,l){const d=c("el-pagination");return y(),k("div",{class:E([{hidden:a.hidden},"pagination-container"])},[r(d,N({"current-page":l.currentPage,"onUpdate:currentPage":t[0]||(t[0]=g=>l.currentPage=g),"page-size":l.pageSize,"onUpdate:pageSize":t[1]||(t[1]=g=>l.pageSize=g),background:a.background,layout:a.layout,total:a.total},e.$attrs,{"page-sizes":a.pageSizes,onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange}),null,16,["current-page","page-size","background","layout","total","page-sizes","onSizeChange","onCurrentChange"])],2)}const W=w(K,[["render",R],["__scopeId","data-v-b0a3c410"]]);class X extends F{constructor(a){super({expand:!0});m(this,"perPage",20);m(this,"pinned",!0);m(this,"sort_direction","ASC");m(this,"sort_column","id");m(this,"columns",[]);this.update(a)}}const Y=e=>(O("data-v-6dc8ecf1"),e=e(),V(),e),Z={class:"common-layout"},$=Y(()=>v("h4",null,"Объявления",-1)),ee=U({__name:"AdvertsList",setup(e){j(async()=>{l()});const t=h(!1),{getAdvertsList:a}=Q();h(new X);const u=h([]),n=h({total:0,page:1,perPage:10,sort_column:"id",sort_direction:"ASC"}),l=(s=!1,p=!1)=>{t.value=!0,s&&(n.value.page=1);const S={...n.value};return a(S).then(({data:_})=>{console.log(_),u.value=_.data,n.value.total=_.meta.total}).finally(()=>{t.value=!1})},d=s=>{n.value.sort_column=s.prop,n.value.sort_direction=s.order==="descending"?"DESC":"ASC",l()},g=s=>s??"/assets/images/no-img.png";return(s,p)=>{const S=c("el-row"),_=c("router-link"),f=c("el-table-column"),C=c("el-image"),x=c("el-table"),A=c("el-main"),B=c("el-container"),T=q("loading");return y(),k("div",Z,[r(B,null,{default:i(()=>[r(A,null,{default:i(()=>[r(S,{class:"py-4 mb-5 header-title d-flex justify-content-center"},{default:i(()=>[$]),_:1}),z((y(),L(x,{ref:"table",data:u.value,border:"",fit:"",size:"small",class:"main-table",onSortChange:d},{default:i(()=>[r(f,{sortable:"custom",prop:"id",label:"ID",width:"70",align:"center"},{default:i(o=>[r(_,{to:{name:"AdvertCard",params:{id:o.row.id}}},{default:i(()=>[v("h3",null,b(o.row.id),1)]),_:2},1032,["to"])]),_:1}),r(f,{prop:"title",label:"Название"},{default:i(o=>[v("h4",null,b(o.row.title),1)]),_:1}),r(f,{sortable:"custom",prop:"price",label:"Цена",width:"120"},{default:i(o=>[v("h6",null,b(o.row.price)+" ₽",1)]),_:1}),r(f,{prop:"image",label:"Фото",align:"center"},{default:i(o=>[r(C,{src:g(o.row.image),style:{height:"100px"},fit:"fill"},{error:i(()=>[r(C,{src:"/assets/images/no-img.png",style:{height:"100px"},fit:"fill"})]),_:2},1032,["src"])]),_:1})]),_:1},8,["data"])),[[T,t.value]]),z(r(W,{limit:n.value.perPage,"onUpdate:limit":p[0]||(p[0]=o=>n.value.perPage=o),page:n.value.page,"onUpdate:page":p[1]||(p[1]=o=>n.value.page=o),total:n.value.total,onPagination:p[2]||(p[2]=o=>l())},null,8,["limit","page","total"]),[[M,n.value.total>0]])]),_:1})]),_:1})])}}}),oe=w(ee,[["__scopeId","data-v-6dc8ecf1"]]);export{oe as default};
