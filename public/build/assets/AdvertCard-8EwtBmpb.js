import{d as q,e as r,b as E,c as f,a as e,w as t,u as L,k as M,r as a,f as T,o as d,g as G,h,i as s,t as g,F as H,l as J,q as y,s as K,p as O,j as P,_ as Q}from"./app-B0wpD2Za.js";import{u as W,A as X}from"./useAdvert-Dn0vfqZA.js";import{u as Y,a as Z}from"./useRules-CkGS_ocY.js";const N=_=>(O("data-v-c98f254f"),_=_(),P(),_),$={class:"common-layout"},ee={class:"card-header"},te={class:"block text-center pb-4"},ae=N(()=>s("span",null,"Фото товара",-1)),le={class:"price-section"},oe=N(()=>s("span",null,"Цена: ",-1)),se={key:0,class:"description"},ne={class:"mt-4"},ce=q({__name:"AdvertCard",setup(_){const x=L();M();const i=r(!1),{getAdvert:k}=W();Y(),r();const p=r(!1),m=r(!1);r(Z);const o=r(new X);E(async()=>{try{i.value=!0;const{data:l}=await k(+x.params.id);o.value.update(l)}catch(l){console.log(l)}finally{i.value=!1}});const v=r([]),B=async()=>{try{const l=[];v.value=[],p.value&&l.push("description"),m.value&&l.push("images");const n=l.length?{fields:l}:{};i.value=!0;const{data:u}=await k(+x.params.id,n);o.value.update(u)}catch(l){console.log(l)}finally{i.value=!1}};return(l,n)=>{const u=a("el-image"),w=a("el-carousel-item"),D=a("el-carousel"),V=a("el-col"),b=a("el-row"),C=a("el-checkbox"),F=a("el-button"),I=a("el-collapse-item"),S=a("el-collapse"),R=a("el-card"),U=a("el-main"),z=a("el-container"),j=T("loading");return d(),f("div",$,[e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[G((d(),h(R,{shadow:"always",class:"box-card mt-5 text-center mx-auto w-50"},{header:t(()=>[s("div",ee,[s("h2",null,g(o.value.title),1)])]),default:t(()=>{var A;return[s("div",te,[ae,e(D,{arrow:((A=o.value.images)==null?void 0:A.length)>1?"hover":"never",interval:5e3,height:"300px"},{default:t(()=>[o.value.images?(d(!0),f(H,{key:0},J(o.value.images,c=>(d(),h(w,{key:c},{default:t(()=>[e(u,{src:c,style:{height:"300px"},fit:"cover"},null,8,["src"])]),_:2},1024))),128)):(d(),h(w,{key:1},{default:t(()=>[e(u,{src:o.value.image,style:{height:"300px"},fit:"cover"},{error:t(()=>[e(u,{src:"/assets/images/no-img.png",style:{height:"300px"},fit:"cover"})]),_:1},8,["src"])]),_:1}))]),_:1},8,["arrow"])]),s("div",le,[oe,s("span",null,g(o.value.price)+" ₽",1)]),p.value&&o.value.description?(d(),f("div",se,[e(b,{gutter:10},{default:t(()=>[e(V,{span:6,class:"description-property"},{default:t(()=>[y(" Описание: ")]),_:1})]),_:1}),e(b,{gutter:10},{default:t(()=>[e(V,{span:24,class:"description-value"},{default:t(()=>[y(g(o.value.description),1)]),_:1})]),_:1})])):K("",!0),e(S,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=c=>v.value=c),class:"mt-4"},{default:t(()=>[e(I,{title:"Запрос доп данных",name:"additionalFields"},{default:t(()=>[s("div",null,[e(C,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=c=>p.value=c),label:"Описание",size:"large",border:""},null,8,["modelValue"]),e(C,{modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=c=>m.value=c),label:"Все фото",size:"large",border:""},null,8,["modelValue"])]),s("div",ne,[e(F,{type:"success",onClick:B},{default:t(()=>[y("Получить")]),_:1})])]),_:1})]),_:1},8,["modelValue"])]}),_:1})),[[j,i.value]])]),_:1})]),_:1})])}}}),ue=Q(ce,[["__scopeId","data-v-c98f254f"]]);export{ue as default};
